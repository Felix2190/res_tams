<?php

	#-----------------------------------------------------------------------------------------------------------------#
	#---------------------------------------Archivos necesarios Require Include---------------------------------------#
	#-----------------------------------------------------------------------------------------------------------------#

	require FOLDER_MODEL_WS . "ws.class.AccountService.getInvoice.inc.php";


	#-----------------------------------------------------------------------------------------------------------------#
	#--------------------------------------------Inicializacion de control--------------------------------------------#
	#-----------------------------------------------------------------------------------------------------------------#



	#-----------------------------------------------------------------------------------------------------------------#
	#-----------------------------------------------------------------------------------------------------------------#

	#-----------------------------------------------------------------------------------------------------------------#
	#----------------------------------------------------Funciones----------------------------------------------------#
	#-----------------------------------------------------------------------------------------------------------------#


	#-----------------------------------------------------------------------------------------------------------------#
	#-----------------------------------------------------------------------------------------------------------------#


	#-----------------------------------------------------------------------------------------------------------------#
	#---------------------------------------------------Seccion AJAX--------------------------------------------------#
	#-----------------------------------------------------------------------------------------------------------------#

	//$xajax=new xajax();



	///$xajax->processRequest();

	#-----------------------------------------------------------------------------------------------------------------#
	#-----------------------------------------------------------------------------------------------------------------#

	#-----------------------------------------------------------------------------------------------------------------#
	#-------------------------------------------Inicializacion de variables-------------------------------------------#
	#-----------------------------------------------------------------------------------------------------------------#
	
	
	$getInvoice=new DAccountServiceGetInvoice();
	$getInvoice->Param->setAccountId($objSession->getAccountId());
	$getInvoice->Param->setInvoice($objSession->getAccountId() . "-" . $_GET['id']);
	$getInvoice->execute();
	if($getInvoice->getError())
		die($getInvoice->getStrError());
	
	//print_r($file=$getInvoice->Response);
	
	
		header("Content-type:application/pdf");
		
		// It will be called downloaded.pdf
		header("Content-Disposition:attachment;filename=" . $objSession->getAccountId() . "-" . $_GET['id'] . ".pdf");
		
	
	echo $getInvoice->Response->getFile();
		
	//$getInvoice->makeDebugFile(FOLDER_LOG);
	
	
	
	
    
